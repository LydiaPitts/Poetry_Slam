<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic HTML Page</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>Poem Name: gray value</h1>
    <h2>Lydia Pitts: Mission 6</h2>
    <p>
      so Im gonna change the value
      <br>
      of the gray gesso but I valu
      <br>
      like there that easy cause
      <br>
      this really is shah's
      <br>
      the a little of that supervalu
    <p>
    <button id="speakbtn">Speak 2</button>

    Select Voice: <select name="" id="voiceList"></select>

    <script>
      var voiceList = document.querySelector('#voiceList')
      var speakbtn = document.querySelector('#speakbtn')

      var tts = window.speechSynthesis;
      var voices = [];

      var poem = "so Im gonna change the value. of the gray gesso but I valu. like there that easy cause. this really is shah's. the a little of that supervalu. "
      GetVoices();

      if(speechSynthesis !== undefined){
	     speechSynthesis.onvoiceschanged = GetVoices;
      }

      speakbtn.addEventListener('click', ()=>{
        var toSpeak = new SpeechSynthesisUtterance(poem)
        var selectedVoiceName = voiceList.selectedOptions[0].getAttribute('data-name');
        voices.forEach((voice)=>{
          if(voice.name === selectedVoiceName){
            toSpeak.voice = voice;
          }
        });
        tts.speak(toSpeak);
      });

      function GetVoices(){
	     voices = tts.getVoices();
	     voiceList.innterHTML = '';
	     voices.forEach((voice)=>{
		    var listItem = document.createElement('option');
		    listItem.textContent = voice.name;
		    listItem.setAttribute('data-lang', voice.lang);
		    listItem.setAttribute('data-name', voice.name);
		    voiceList.appendChild(listItem);
	     });
	     voiceList.selectedIndex = 0;
      }
    </script>
  </body>
</html>