<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic HTML Page</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>little_beagan</h1>
    <h2>Lydia Pitts: Mission 6</h2>
    <p>
      youll become the most unpopular person
      <br>
      in the background in this mcphearson
      <br>
      on just so you can
      <br>
      see what we need beagan
      <br>
      it and they like the little burson
    <p>
    <button id="speakbtn">Hear Poem</button>

    <br>
    Select Voice: <select name="" id="voiceList"></select>

    <script>
      var voiceList = document.querySelector('#voiceList')
      var speakbtn = document.querySelector('#speakbtn')

      var tts = window.speechSynthesis;
      var voices = [];

      var poem = "youll become the most unpopular person. in the background in this mcphearson. on just so you can. see what we need beagan. it and they like the little burson. "
      GetVoices();

      if(speechSynthesis !== undefined){
	     speechSynthesis.onvoiceschanged = GetVoices;
      }

      speakbtn.addEventListener('click', ()=>{
        var toSpeak = new SpeechSynthesisUtterance(poem)
        var selectedVoiceName = voiceList.selectedOptions[0].getAttribute('data-name');
        voices.forEach((voice)=>{
          if(voice.name === selectedVoiceName){
            toSpeak.voice = voice;
          }
        });
        tts.speak(toSpeak);
      });

      function GetVoices(){
	     voices = tts.getVoices();
	     voiceList.innterHTML = '';
	     voices.forEach((voice)=>{
		    var listItem = document.createElement('option');
		    listItem.textContent = voice.name;
		    listItem.setAttribute('data-lang', voice.lang);
		    listItem.setAttribute('data-name', voice.name);
		    voiceList.appendChild(listItem);
	     });
	     voiceList.selectedIndex = 0;
      }
    </script>
  </body>
</html>